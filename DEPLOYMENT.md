# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é Telegram AI Content Agent

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –¥–µ–ø–ª–æ—é —Å–∏—Å—Ç–µ–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

- [ ] Telegram –∫–∞–Ω–∞–ª —Å–æ–∑–¥–∞–Ω
- [ ] Telegram –±–æ—Ç —Å–æ–∑–¥–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª
- [ ] GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω
- [ ] VPS —Å–µ—Ä–≤–µ—Ä –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] PostgreSQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—â–µ–Ω–∞
- [ ] –ö–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

## 1Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ Telegram –∫–∞–Ω–∞–ª–∞ –∏ –±–æ—Ç–∞

### –®–∞–≥ 1.1: –°–æ–∑–¥–∞—Ç—å Telegram –∫–∞–Ω–∞–ª

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–∂–º–∏—Ç–µ ‚ò∞ ‚Üí **–ù–æ–≤—ã–π –∫–∞–Ω–∞–ª**
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `–£–º–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤`
4. –û–ø–∏—Å–∞–Ω–∏–µ: `–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è Ozon, Wildberries. –ö–µ–π—Å—ã, –∏–Ω—Å–∞–π—Ç—ã, —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Ä–æ—Å—Ç–∞ –ø—Ä–æ–¥–∞–∂.`
5. –í—ã–±–µ—Ä–∏—Ç–µ **–ü—É–±–ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª**
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ username: `@smart_analytics_mp` (–∏–ª–∏ –ª—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
7. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**

### –®–∞–≥ 1.2: –°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ –≤ Telegram: **@BotFather**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É: `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞: `ETL Content Agent`
4. –í–≤–µ–¥–∏—Ç–µ username: `@etl_content_agent_bot` (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`)
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Bot Token** - —ç—Ç–æ –≤–∞—à `TELEGRAM_BOT_TOKEN`
   ```
   –ü—Ä–∏–º–µ—Ä: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   ```

### –®–∞–≥ 1.3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞

1. –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ: `/mybots`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. **Edit Bot** ‚Üí **Edit Description**:
   ```
   –ë–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ–± ETL —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö.
   Powered by Claude AI.
   ```
4. **Edit Bot** ‚Üí **Edit About**:
   ```
   AI-–∞–≥–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   ```

### –®–∞–≥ 1.4: –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –∫–∞–Ω–∞–ª `–£–º–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ ‚Üí **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**
3. **–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
4. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ `@etl_content_agent_bot`
5. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞:
   - ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
   - ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
6. –ù–∞–∂–º–∏—Ç–µ **–ì–æ—Ç–æ–≤–æ**

### –®–∞–≥ 1.5: –ü–æ–ª—É—á–∏—Ç—å Channel ID

**–°–ø–æ—Å–æ–± 1 (—á–µ—Ä–µ–∑ –±–æ—Ç–∞):**
1. –ù–∞–ø–∏—à–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª
2. –û—Ç–∫—Ä–æ–π—Ç–µ: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
3. –ù–∞–π–¥–∏—Ç–µ `"chat":{"id":-1001234567890}` - —ç—Ç–æ –≤–∞—à Channel ID

**–°–ø–æ—Å–æ–± 2 (—á–µ—Ä–µ–∑ username):**
- –ï—Å–ª–∏ –∫–∞–Ω–∞–ª –ø—É–±–ª–∏—á–Ω—ã–π —Å username `@smart_analytics_mp`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@smart_analytics_mp` –∫–∞–∫ Channel ID

### –®–∞–≥ 1.6: –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª

```bash
cd /Users/vladimirbragin/projects/telegram-ai-agent
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ:
```env
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHANNEL_ID=@smart_analytics_mp
TELEGRAM_ADMIN_ID=<–≤–∞—à_–ª–∏—á–Ω—ã–π_telegram_id>
```

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID:**
- –ù–∞–ø–∏—à–∏—Ç–µ @userinfobot –∏ –æ–Ω –≤–µ—Ä–Ω—ë—Ç –≤–∞—à ID

---

## 2Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### –®–∞–≥ 2.1: –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [github.com/new](https://github.com/new)
2. –ù–∞–∑–≤–∞–Ω–∏–µ: `telegram-ai-content-agent`
3. –û–ø–∏—Å–∞–Ω–∏–µ: `AI-powered content generation and publishing system for Telegram channels`
4. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **Private** (–µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø—É–±–ª–∏—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–¥)
   - **Public** (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ)
5. **–ù–ï –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ** —Å README (—É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∫–æ–¥)
6. –ù–∞–∂–º–∏—Ç–µ **Create repository**

### –®–∞–≥ 2.2: –î–æ–±–∞–≤–∏—Ç—å —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
cd /Users/vladimirbragin/projects/telegram-ai-agent

# –î–æ–±–∞–≤–∏—Ç—å GitHub remote
git remote add origin https://github.com/<–≤–∞—à_username>/telegram-ai-content-agent.git

# –ò–ª–∏ —á–µ—Ä–µ–∑ SSH (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
git remote add origin git@github.com:<–≤–∞—à_username>/telegram-ai-content-agent.git

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
git remote -v
```

### –®–∞–≥ 2.3: Push –∫–æ–¥–∞ –Ω–∞ GitHub

```bash
# Push –≤—Å–µ—Ö –∫–æ–º–º–∏—Ç–æ–≤
git push -u origin master

# –ò–ª–∏ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ main:
git branch -M main
git push -u origin main
```

### –®–∞–≥ 2.4: –ó–∞—â–∏—Ç–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

**–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `.env` –≤ .gitignore:**
```bash
grep "\.env" .gitignore
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: .env
```

**–í–∞–∂–Ω–æ:** `.env` —Ñ–∞–π–ª –ù–ï –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞—Å—Ç—å –≤ Git!

### –®–∞–≥ 2.5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Secrets (–¥–ª—è CI/CD)

–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GitHub Actions:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. **New repository secret**
4. –î–æ–±–∞–≤—å—Ç–µ:
   - `ANTHROPIC_API_KEY`
   - `TELEGRAM_BOT_TOKEN`
   - `TELEGRAM_CHANNEL_ID`
   - `DATABASE_URL` (–¥–ª—è production)

---

## 3Ô∏è‚É£ –í—ã–±–æ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VPS —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 3.1: –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –¶–µ–Ω–∞/–º–µ—Å | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|-----------|----------|-------|--------|
| **Timeweb** | ~500‚ÇΩ | –†—É—Å—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –û–° |
| **Selectel** | ~600‚ÇΩ | –ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ö–æ—Ä–æ—à–∞—è —Å–µ—Ç—å | –î–æ—Ä–æ–∂–µ |
| **AWS EC2** | ~$5-10 | –ú–æ—â–Ω—ã–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π | –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
| **DigitalOcean** | $6/–º–µ—Å | –ü—Ä–æ—Å—Ç–æ–π, —Ö–æ—Ä–æ—à–∏–π UI | –ù—É–∂–Ω–∞ –∫–∞—Ä—Ç–∞, –Ω–µ –†–§ |
| **Hetzner** | ‚Ç¨4/–º–µ—Å | –î—ë—à–µ–≤–æ, –±—ã—Å—Ç—Ä–æ | –ù–µ –†–§, –Ω—É–∂–Ω–∞ –∫–∞—Ä—Ç–∞ |

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- **CPU:** 2 cores
- **RAM:** 4 GB
- **–î–∏—Å–∫:** 40 GB SSD
- **–û–°:** Ubuntu 22.04 LTS

### –®–∞–≥ 3.2: –°–æ–∑–¥–∞–Ω–∏–µ VPS (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Timeweb)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [timeweb.cloud](https://timeweb.cloud)
2. **–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã** ‚Üí **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä**
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   - **–û–°:** Ubuntu 22.04 LTS
   - **–¢–∞—Ä–∏—Ñ:** 2 CPU, 4GB RAM, 40GB SSD
   - **–î–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä:** –ú–æ—Å–∫–≤–∞ (–¥–ª—è –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏)
4. **SSH –∫–ª—é—á:**
   - –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π SSH –∫–ª—é—á
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π: `ssh-keygen -t ed25519 -C "your_email@example.com"`
5. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä**

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:**
- IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: `123.45.67.89`
- SSH –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –®–∞–≥ 3.3: –ü–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH
ssh root@123.45.67.89

# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ fingerprint: yes
```

### –®–∞–≥ 3.4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
apt install -y curl wget git htop nano
```

### –®–∞–≥ 3.5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker
systemctl enable docker
systemctl start docker

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker --version
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: Docker version 24.x.x
```

### –®–∞–≥ 3.6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker Compose
apt install -y docker-compose-plugin

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker compose version
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: Docker Compose version v2.x.x
```

### –®–∞–≥ 3.7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (UFW)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UFW (–µ—Å–ª–∏ –Ω–µ—Ç)
apt install -y ufw

# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH
ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP/HTTPS (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
ufw allow 80/tcp
ufw allow 443/tcp

# –í–∫–ª—é—á–∏—Ç—å firewall
ufw --force enable

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
ufw status
```

### –®–∞–≥ 3.8: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–µ–ø–ª–æ—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser deploy

# –î–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É sudo
usermod -aG sudo deploy
usermod -aG docker deploy

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SSH –∫–ª—é—á–∏
rsync --archive --chown=deploy:deploy ~/.ssh /home/deploy/

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - deploy
```

---

## 4Ô∏è‚É£ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 4.1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@123.45.67.89

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /opt

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/<–≤–∞—à_username>/telegram-ai-content-agent.git

cd telegram-ai-content-agent
```

### –®–∞–≥ 4.2: –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
nano .env
```

**Production .env:**
```env
# Anthropic API
ANTHROPIC_API_KEY=sk-ant-api03-...

# Telegram
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHANNEL_ID=@smart_analytics_mp
TELEGRAM_ADMIN_ID=123456789

# Database (–¥–ª—è Docker)
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/telegram_ai_agent

# Scheduler
PARSE_SCHEDULE_HOURS=8,20
POST_GENERATION_DAYS=mon,wed,fri
POST_GENERATION_HOUR=10

# Logging
LOG_LEVEL=INFO
LOG_FILE=/app/logs/app.log
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

### –®–∞–≥ 4.3: –ó–∞–ø—É—Å–∫ PostgreSQL

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ PostgreSQL
docker compose up -d postgres

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å
docker compose ps

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs postgres
```

### –®–∞–≥ 4.4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π)
apt install -y python3-pip python3-venv

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å venv
deactivate
```

### –®–∞–≥ 4.5: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker compose build app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë –∑–∞–ø—É—â–µ–Ω–æ
docker compose ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# - postgres
# - app
```

### –®–∞–≥ 4.6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker compose logs -f app

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ PostgreSQL
docker compose logs -f postgres

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ª–æ–≥–∏
docker compose logs -f
```

### –®–∞–≥ 4.7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: Docker restart policy (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ docker-compose.yml)**
```yaml
restart: unless-stopped
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: Systemd service**

```bash
# –°–æ–∑–¥–∞—Ç—å systemd unit —Ñ–∞–π–ª
nano /etc/systemd/system/telegram-ai-agent.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```ini
[Unit]
Description=Telegram AI Content Agent
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/opt/telegram-ai-content-agent
ExecStart=/usr/bin/docker compose up -d
ExecStop=/usr/bin/docker compose down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:
```bash
systemctl daemon-reload
systemctl enable telegram-ai-agent.service
systemctl start telegram-ai-agent.service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status telegram-ai-agent.service
```

---

## 5Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –®–∞–≥ 5.1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
docker compose exec postgres psql -U postgres -d telegram_ai_agent

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
\dt

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - sources
# - posts
# - schedule
# - post_stats

# –í—ã–π—Ç–∏
\q
```

### –®–∞–≥ 5.2: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker compose exec app bash

# –ó–∞–ø—É—Å—Ç–∏—Ç—å main.py
python -m app.main

# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
# - –°–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
# - –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–æ—Å—Ç–∞
# - Preview –ø–æ—Å—Ç–∞
```

### –®–∞–≥ 5.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à Telegram –∫–∞–Ω–∞–ª
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ—è–≤–∏–ª–æ—Å—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   docker compose logs app | grep -i error
   ```

### –®–∞–≥ 5.4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 3)

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ scheduler
docker compose logs app | grep -i scheduler

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–¥–∞—á–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied" –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ SSH

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ SSH –∫–ª—é—á
chmod 600 ~/.ssh/id_ed25519

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∫–ª—é—á–∞
ssh -i ~/.ssh/id_ed25519 root@123.45.67.89
```

### –ü—Ä–æ–±–ª–µ–º–∞: Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Docker
systemctl restart docker

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status docker

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ - –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
apt remove docker docker-engine docker.io containerd runc
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω–∞
docker compose ps postgres

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose restart postgres

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DATABASE_URL –≤ .env
cat .env | grep DATABASE_URL
```

### –ü—Ä–æ–±–ª–µ–º–∞: Telegram –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∏—Ç—å –≤ –∫–∞–Ω–∞–ª

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ (–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TELEGRAM_CHANNEL_ID:
   ```bash
   # –ï—Å–ª–∏ –∫–∞–Ω–∞–ª –ø—É–±–ª–∏—á–Ω—ã–π
   TELEGRAM_CHANNEL_ID=@username

   # –ï—Å–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π
   TELEGRAM_CHANNEL_ID=-1001234567890
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: Claude API –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å API –∫–ª—é—á–∞ –Ω–∞ [console.anthropic.com](https://console.anthropic.com)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:
   ```bash
   cat .env | grep ANTHROPIC_API_KEY
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ rate limits (–Ω–µ –±–æ–ª–µ–µ 5 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker compose logs -f app

# –õ–æ–≥–∏ PostgreSQL
docker compose logs -f postgres

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
docker compose logs --since 1h app

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
docker compose logs app | grep -i error
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/RAM
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
htop
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health PostgreSQL
docker compose exec postgres pg_isready -U postgres

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ –ë–î
docker compose exec postgres psql -U postgres -d telegram_ai_agent -c "SELECT pg_size_pretty(pg_database_size('telegram_ai_agent'));"
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] Telegram –∫–∞–Ω–∞–ª —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∏—Ç—å
- [ ] GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω, –∫–æ–¥ –∑–∞–ª–∏—Ç
- [ ] VPS —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ SSH
- [ ] Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] PostgreSQL –∑–∞–ø—É—â–µ–Ω–∞, –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ Docker
- [ ] –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ –∫–∞–Ω–∞–ª
- [ ] –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (systemd –∏–ª–∏ docker restart)

---

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–≠—Ç–∞–ø 3).

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Scheduler –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
3. –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (VC.ru, Telegram-–∫–∞–Ω–∞–ª—ã)
